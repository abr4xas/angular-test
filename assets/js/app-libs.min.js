(function () {
    'use strict';
    angular
        .module('cfapp', ['ui.router','ngResource','apiRest']);
})();
(function () {
    'use strict';
    angular
        .module('apiRest', [])
        .factory('GetPostFactory', GetPostService)
        .factory('GetPostDetailFactory', GetPostDetailService)
        .factory('GetCommentsFactory', GetCommentsService);

    GetPostService.$injector = ['$resource'];
    GetPostDetailService.$injector = ['$resource'];
    GetCommentsService.$injector = ['$resource'];

    function GetPostService($resource) {
        return $resource('http://jsonplaceholder.typicode.com/posts');
    }
    // Detalles de la publicacion
    function GetPostDetailService($resource) {
        return $resource('http://jsonplaceholder.typicode.com/posts/:id', {
            id: '@id'
        });
    }
    
    // Comentarios de la publicacion
    function GetCommentsService($resource) {
        return $resource('http://jsonplaceholder.typicode.com/posts/:id/comments', {
            id: '@id'
        });
    }
    
})();
(function () {
    'use strict';
    angular
        .module('cfapp')
        .controller('postCtrl', Post)
        .controller('detailCtrl', Detail)
        .controller('commentsCtrl', Comments);

    Post.$inject = ['GetPostFactory'];
    Detail.$inject = ['GetPostDetailFactory', '$stateParams'];
    Comments.$inject = ['GetCommentsFactory', '$stateParams'];

    function Post(GetPostFactory) {
        var vm = this;
        vm.entries = [];
        execute();
        function execute() {
            return new ObtenerPost();
        }
        function ObtenerPost() {
            return GetPostFactory.query(function (data) {
                vm.entries = data;
                //console.log(data);
                vm.entries;
            }); // regresa todas las publicaciones
        }
    }

    function Detail(GetPostDetailService, $stateParams) {
        var vm = this;
        vm.entry;
        vm.id = $stateParams.id;
        execute();
        function execute() {
            return new ObtenerPostDetalle();
        }
        function ObtenerPostDetalle() {
            return GetPostDetailService.get({ id: vm.id }, function (data) {
                vm.entry = data;
                //console.log(data);
                vm.entry;
            });
        }
    }
    function Comments(GetCommentsFactory, $stateParams) {
        var vm = this;
        vm.comment;
        vm.id = $stateParams.id;
        execute();
        function execute() {
            return new ObtenerComentarios();
        }
        function ObtenerComentarios() {
            return GetCommentsFactory.query({ id: vm.id }, function (data) {
                vm.comment = data;
                //console.log(data);
                vm.comment;
            });
        }

    }

})();
(function () {
    'use strict';
    angular
        .module('cfapp')
        .config(routes)
        .run(removerCache);

    // Inyectando dependencias.
    routes.$inject = ['$stateProvider', '$urlRouterProvider', '$locationProvider'];
    /**
     * @description gestiona las rutas de la aplicaci√≥n.
     * @param $stateProvider
     * @param $urlRouterProvider
     */
    function routes($stateProvider, $urlRouterProvider, $locationProvider) {
        $urlRouterProvider.otherwise('/');
        $stateProvider
            .state('home', {
                url: '/',
                controller: 'postCtrl',
                controllerAs: 'ctrl',
                templateUrl: './templates/home/home_tpl.html'
            })
            .state('post', {
                url: '/post/:id',
                views: {
                    post: {
                        controller: 'detailCtrl',
                        controllerAs: 'ctrl',
                        templateUrl: './templates/detail/post_detail_tpl.html'
                    },
                    comments: {
                        controller: 'commentsCtrl',
                        controllerAs: 'ctrl',
                        templateUrl: './templates/comments/comments_tpl.html'
                    }
                }
            });
        $locationProvider.html5Mode(false);
    }
    // Inyectando dependencias.
    removerCache.$inject = ['$rootScope', '$templateCache'];
    /**
     * @description Remueve el cache al detectar que un cambio de ruta comienza.
     * @param $rootScope
     * @param $templateCache
     */
    function removerCache($rootScope, $templateCache) {
        $rootScope.$on('$routeChangeStart', function (event, next, current) {
            if (typeof (current) !== 'undefined') {
                $templateCache.remove(current.templateUrl);
            }
        });
    }

})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNmYXBwLm1vZHVsZS5qcyIsImNmYXBwLnNlcnZpY2VzLmpzIiwiY2ZhcHAuY29udHJvbGxlci5qcyIsImNmYXBwLnJvdXRlcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzlEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImFwcC1saWJzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnY2ZhcHAnLCBbJ3VpLnJvdXRlcicsJ25nUmVzb3VyY2UnLCdhcGlSZXN0J10pO1xufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2FwaVJlc3QnLCBbXSlcbiAgICAgICAgLmZhY3RvcnkoJ0dldFBvc3RGYWN0b3J5JywgR2V0UG9zdFNlcnZpY2UpXG4gICAgICAgIC5mYWN0b3J5KCdHZXRQb3N0RGV0YWlsRmFjdG9yeScsIEdldFBvc3REZXRhaWxTZXJ2aWNlKVxuICAgICAgICAuZmFjdG9yeSgnR2V0Q29tbWVudHNGYWN0b3J5JywgR2V0Q29tbWVudHNTZXJ2aWNlKTtcblxuICAgIEdldFBvc3RTZXJ2aWNlLiRpbmplY3RvciA9IFsnJHJlc291cmNlJ107XG4gICAgR2V0UG9zdERldGFpbFNlcnZpY2UuJGluamVjdG9yID0gWyckcmVzb3VyY2UnXTtcbiAgICBHZXRDb21tZW50c1NlcnZpY2UuJGluamVjdG9yID0gWyckcmVzb3VyY2UnXTtcblxuICAgIGZ1bmN0aW9uIEdldFBvc3RTZXJ2aWNlKCRyZXNvdXJjZSkge1xuICAgICAgICByZXR1cm4gJHJlc291cmNlKCdodHRwOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS9wb3N0cycpO1xuICAgIH1cbiAgICAvLyBEZXRhbGxlcyBkZSBsYSBwdWJsaWNhY2lvblxuICAgIGZ1bmN0aW9uIEdldFBvc3REZXRhaWxTZXJ2aWNlKCRyZXNvdXJjZSkge1xuICAgICAgICByZXR1cm4gJHJlc291cmNlKCdodHRwOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS9wb3N0cy86aWQnLCB7XG4gICAgICAgICAgICBpZDogJ0BpZCdcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIENvbWVudGFyaW9zIGRlIGxhIHB1YmxpY2FjaW9uXG4gICAgZnVuY3Rpb24gR2V0Q29tbWVudHNTZXJ2aWNlKCRyZXNvdXJjZSkge1xuICAgICAgICByZXR1cm4gJHJlc291cmNlKCdodHRwOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS9wb3N0cy86aWQvY29tbWVudHMnLCB7XG4gICAgICAgICAgICBpZDogJ0BpZCdcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxufSkoKTsiLCIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBhbmd1bGFyXG4gICAgICAgIC5tb2R1bGUoJ2NmYXBwJylcbiAgICAgICAgLmNvbnRyb2xsZXIoJ3Bvc3RDdHJsJywgUG9zdClcbiAgICAgICAgLmNvbnRyb2xsZXIoJ2RldGFpbEN0cmwnLCBEZXRhaWwpXG4gICAgICAgIC5jb250cm9sbGVyKCdjb21tZW50c0N0cmwnLCBDb21tZW50cyk7XG5cbiAgICBQb3N0LiRpbmplY3QgPSBbJ0dldFBvc3RGYWN0b3J5J107XG4gICAgRGV0YWlsLiRpbmplY3QgPSBbJ0dldFBvc3REZXRhaWxGYWN0b3J5JywgJyRzdGF0ZVBhcmFtcyddO1xuICAgIENvbW1lbnRzLiRpbmplY3QgPSBbJ0dldENvbW1lbnRzRmFjdG9yeScsICckc3RhdGVQYXJhbXMnXTtcblxuICAgIGZ1bmN0aW9uIFBvc3QoR2V0UG9zdEZhY3RvcnkpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdm0uZW50cmllcyA9IFtdO1xuICAgICAgICBleGVjdXRlKCk7XG4gICAgICAgIGZ1bmN0aW9uIGV4ZWN1dGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE9idGVuZXJQb3N0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gT2J0ZW5lclBvc3QoKSB7XG4gICAgICAgICAgICByZXR1cm4gR2V0UG9zdEZhY3RvcnkucXVlcnkoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2bS5lbnRyaWVzID0gZGF0YTtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgIHZtLmVudHJpZXM7XG4gICAgICAgICAgICB9KTsgLy8gcmVncmVzYSB0b2RhcyBsYXMgcHVibGljYWNpb25lc1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gRGV0YWlsKEdldFBvc3REZXRhaWxTZXJ2aWNlLCAkc3RhdGVQYXJhbXMpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdm0uZW50cnk7XG4gICAgICAgIHZtLmlkID0gJHN0YXRlUGFyYW1zLmlkO1xuICAgICAgICBleGVjdXRlKCk7XG4gICAgICAgIGZ1bmN0aW9uIGV4ZWN1dGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE9idGVuZXJQb3N0RGV0YWxsZSgpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIE9idGVuZXJQb3N0RGV0YWxsZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBHZXRQb3N0RGV0YWlsU2VydmljZS5nZXQoeyBpZDogdm0uaWQgfSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2bS5lbnRyeSA9IGRhdGE7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgICB2bS5lbnRyeTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIENvbW1lbnRzKEdldENvbW1lbnRzRmFjdG9yeSwgJHN0YXRlUGFyYW1zKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIHZtLmNvbW1lbnQ7XG4gICAgICAgIHZtLmlkID0gJHN0YXRlUGFyYW1zLmlkO1xuICAgICAgICBleGVjdXRlKCk7XG4gICAgICAgIGZ1bmN0aW9uIGV4ZWN1dGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE9idGVuZXJDb21lbnRhcmlvcygpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIE9idGVuZXJDb21lbnRhcmlvcygpIHtcbiAgICAgICAgICAgIHJldHVybiBHZXRDb21tZW50c0ZhY3RvcnkucXVlcnkoeyBpZDogdm0uaWQgfSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2bS5jb21tZW50ID0gZGF0YTtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgIHZtLmNvbW1lbnQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG59KSgpOyIsIihmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnY2ZhcHAnKVxuICAgICAgICAuY29uZmlnKHJvdXRlcylcbiAgICAgICAgLnJ1bihyZW1vdmVyQ2FjaGUpO1xuXG4gICAgLy8gSW55ZWN0YW5kbyBkZXBlbmRlbmNpYXMuXG4gICAgcm91dGVzLiRpbmplY3QgPSBbJyRzdGF0ZVByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlciddO1xuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBnZXN0aW9uYSBsYXMgcnV0YXMgZGUgbGEgYXBsaWNhY2nDs24uXG4gICAgICogQHBhcmFtICRzdGF0ZVByb3ZpZGVyXG4gICAgICogQHBhcmFtICR1cmxSb3V0ZXJQcm92aWRlclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHJvdXRlcygkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAgICAgICAuc3RhdGUoJ2hvbWUnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnLycsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3Bvc3RDdHJsJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICdjdHJsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4vdGVtcGxhdGVzL2hvbWUvaG9tZV90cGwuaHRtbCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc3RhdGUoJ3Bvc3QnLCB7XG4gICAgICAgICAgICAgICAgdXJsOiAnL3Bvc3QvOmlkJyxcbiAgICAgICAgICAgICAgICB2aWV3czoge1xuICAgICAgICAgICAgICAgICAgICBwb3N0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnZGV0YWlsQ3RybCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICdjdHJsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi90ZW1wbGF0ZXMvZGV0YWlsL3Bvc3RfZGV0YWlsX3RwbC5odG1sJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjb21tZW50czoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ2NvbW1lbnRzQ3RybCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6ICdjdHJsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi90ZW1wbGF0ZXMvY29tbWVudHMvY29tbWVudHNfdHBsLmh0bWwnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKGZhbHNlKTtcbiAgICB9XG4gICAgLy8gSW55ZWN0YW5kbyBkZXBlbmRlbmNpYXMuXG4gICAgcmVtb3ZlckNhY2hlLiRpbmplY3QgPSBbJyRyb290U2NvcGUnLCAnJHRlbXBsYXRlQ2FjaGUnXTtcbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gUmVtdWV2ZSBlbCBjYWNoZSBhbCBkZXRlY3RhciBxdWUgdW4gY2FtYmlvIGRlIHJ1dGEgY29taWVuemEuXG4gICAgICogQHBhcmFtICRyb290U2NvcGVcbiAgICAgKiBAcGFyYW0gJHRlbXBsYXRlQ2FjaGVcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmVyQ2FjaGUoJHJvb3RTY29wZSwgJHRlbXBsYXRlQ2FjaGUpIHtcbiAgICAgICAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN0YXJ0JywgZnVuY3Rpb24gKGV2ZW50LCBuZXh0LCBjdXJyZW50KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIChjdXJyZW50KSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAkdGVtcGxhdGVDYWNoZS5yZW1vdmUoY3VycmVudC50ZW1wbGF0ZVVybCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
